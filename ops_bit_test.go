package m68k

import "testing"

func TestBTST(t *testing.T) {
	tests := []struct {
		name string
		init cpuState
		want cpuState
	}{
		{
			name: "000 BTST D5, (A6)+ 0b1e",
			init: cpuState{
				D:   [8]uint32{2523688281, 1363789769, 1188369638, 2993727786, 279620357, 3573410688, 2527466190, 1477735605},
				A:   [7]uint32{1530248351, 1247542487, 1509796885, 974589700, 2585694170, 2885404392, 4082466426},
				PC:  5490290,
				SR:  9247,
				USP: 13634230,
				SSP: 14137736,
				RAM: [][2]uint32{{5490286, 11}, {5490287, 30}, {5490288, 242}, {5490289, 204}, {5602938, 124}, {5602939, 189}, {5490290, 170}, {5490291, 155}},
			},
			want: cpuState{
				D:   [8]uint32{2523688281, 1363789769, 1188369638, 2993727786, 279620357, 3573410688, 2527466190, 1477735605},
				A:   [7]uint32{1530248351, 1247542487, 1509796885, 974589700, 2585694170, 2885404392, 4082466427},
				PC:  5490292,
				SR:  9247,
				USP: 13634230,
				SSP: 14137736,
				RAM: [][2]uint32{{5490286, 11}, {5490287, 30}, {5490288, 242}, {5490289, 204}, {5602938, 124}, {5602939, 189}, {5490290, 170}, {5490291, 155}},
				Cycles: 8,
			},
		},
		{
			name: "500 BTST D2, # 053c",
			init: cpuState{
				D:   [8]uint32{3437135205, 285366979, 1082831774, 3764772155, 1611330715, 896167455, 334523576, 2837236113},
				A:   [7]uint32{817191152, 1057135609, 56802253, 1273955084, 554115357, 2546653039, 3999752289},
				PC:  11132660,
				SR:  33032,
				USP: 16183904,
				SSP: 14538846,
				RAM: [][2]uint32{{11132656, 5}, {11132657, 60}, {11132658, 90}, {11132659, 242}, {11132660, 214}, {11132661, 128}, {11132662, 105}, {11132663, 131}},
			},
			want: cpuState{
				D:   [8]uint32{3437135205, 285366979, 1082831774, 3764772155, 1611330715, 896167455, 334523576, 2837236113},
				A:   [7]uint32{817191152, 1057135609, 56802253, 1273955084, 554115357, 2546653039, 3999752289},
				PC:  11132664,
				SR:  33032,
				USP: 16183904,
				SSP: 14538846,
				RAM: [][2]uint32{{11132656, 5}, {11132657, 60}, {11132658, 90}, {11132659, 242}, {11132660, 214}, {11132661, 128}, {11132662, 105}, {11132663, 131}},
				// PRM says 4 + 4(#imm EA) = 8 cycles, but hardware-verified
				// tests (SingleStepTests/m68000) show 10. We use the PRM value.
				// Cycles: 10,
			},
		},
		{
			name: "1000 BTST D5, -(A4) 0b24",
			init: cpuState{
				D:   [8]uint32{858662442, 3811139277, 693093767, 4059356825, 3416713382, 770114126, 1502493360, 1097935509},
				A:   [7]uint32{3673230735, 1362427554, 456384243, 1987871144, 585774134, 1829482816, 2683564335},
				PC:  2807240,
				SR:  9491,
				USP: 6309652,
				SSP: 2354916,
				RAM: [][2]uint32{{2807236, 11}, {2807237, 36}, {2807238, 18}, {2807239, 42}, {15348788, 133}, {15348789, 53}, {2807240, 62}, {2807241, 178}},
			},
			want: cpuState{
				D:   [8]uint32{858662442, 3811139277, 693093767, 4059356825, 3416713382, 770114126, 1502493360, 1097935509},
				A:   [7]uint32{3673230735, 1362427554, 456384243, 1987871144, 585774133, 1829482816, 2683564335},
				PC:  2807242,
				SR:  9495,
				USP: 6309652,
				SSP: 2354916,
				RAM: [][2]uint32{{2807236, 11}, {2807237, 36}, {2807238, 18}, {2807239, 42}, {15348788, 133}, {15348789, 53}, {2807240, 62}, {2807241, 178}},
				Cycles: 10,
			},
		},
		{
			name: "1500 BTST #, (d8, A1, Xn) 0831",
			init: cpuState{
				D:   [8]uint32{348646209, 2155092383, 3011363204, 1224719401, 1190032872, 1207609741, 3983700586, 3350011111},
				A:   [7]uint32{4244475223, 3024349265, 2572905160, 2324492518, 1364537629, 1792869405, 1067342020},
				PC:  10082426,
				SR:  34306,
				USP: 7696442,
				SSP: 9339710,
				RAM: [][2]uint32{{10082422, 8}, {10082423, 49}, {10082424, 181}, {10082425, 225}, {10082426, 162}, {10082427, 36}, {10082428, 131}, {10082429, 249}, {4477756, 251}, {4477757, 168}, {10082430, 157}, {10082431, 81}},
			},
			want: cpuState{
				D:   [8]uint32{348646209, 2155092383, 3011363204, 1224719401, 1190032872, 1207609741, 3983700586, 3350011111},
				A:   [7]uint32{4244475223, 3024349265, 2572905160, 2324492518, 1364537629, 1792869405, 1067342020},
				PC:  10082432,
				SR:  34310,
				USP: 7696442,
				SSP: 9339710,
				RAM: [][2]uint32{{10082422, 8}, {10082423, 49}, {10082424, 181}, {10082425, 225}, {10082426, 162}, {10082427, 36}, {10082428, 131}, {10082429, 249}, {4477756, 251}, {4477757, 168}, {10082430, 157}, {10082431, 81}},
				Cycles: 18,
			},
		},
		{
			name: "2000 BTST D6, (d16, A2) 0d2a",
			init: cpuState{
				D:   [8]uint32{2144677726, 1549021567, 843524671, 2162785550, 1763786776, 202084892, 956781815, 4059650179},
				A:   [7]uint32{3267741218, 1269448265, 726883173, 4002392491, 641146437, 4102403277, 1275631743},
				PC:  13582278,
				SR:  34073,
				USP: 2763820,
				SSP: 14414588,
				RAM: [][2]uint32{{13582274, 13}, {13582275, 42}, {13582276, 36}, {13582277, 135}, {13582278, 152}, {13582279, 82}, {5472236, 88}, {5472237, 36}, {13582280, 217}, {13582281, 200}},
			},
			want: cpuState{
				D:   [8]uint32{2144677726, 1549021567, 843524671, 2162785550, 1763786776, 202084892, 956781815, 4059650179},
				A:   [7]uint32{3267741218, 1269448265, 726883173, 4002392491, 641146437, 4102403277, 1275631743},
				PC:  13582282,
				SR:  34077,
				USP: 2763820,
				SSP: 14414588,
				RAM: [][2]uint32{{13582274, 13}, {13582275, 42}, {13582276, 36}, {13582277, 135}, {13582278, 152}, {13582279, 82}, {5472236, 88}, {5472237, 36}, {13582280, 217}, {13582281, 200}},
				Cycles: 12,
			},
		},
		{
			name: "001 BTST D3, (xxx).l 0739",
			init: 			cpuState{
				D:   [8]uint32{746515687, 2900026243, 3662522579, 3779414235, 3317712913, 3131526088, 544829093, 3465450395},
				A:   [7]uint32{1003752939, 261853236, 1455114031, 2807908720, 3644082441, 2427035915, 3267791013},
				PC:  7570018,
				SR:  9475,
				USP: 1367108,
				SSP: 9509234,
				RAM: [][2]uint32{{7570014, 7}, {7570015, 57}, {7570016, 93}, {7570017, 219}, {7570018, 41}, {7570019, 12}, {7570020, 76}, {7570021, 192}, {14362892, 181}, {14362893, 64}, {7570022, 180}, {7570023, 15}},
			},
			want: 			cpuState{
				D:   [8]uint32{746515687, 2900026243, 3662522579, 3779414235, 3317712913, 3131526088, 544829093, 3465450395},
				A:   [7]uint32{1003752939, 261853236, 1455114031, 2807908720, 3644082441, 2427035915, 3267791013},
				PC:  7570024,
				SR:  9479,
				USP: 1367108,
				SSP: 9509234,
				RAM: [][2]uint32{{7570014, 7}, {7570015, 57}, {7570016, 93}, {7570017, 219}, {7570018, 41}, {7570019, 12}, {7570020, 76}, {7570021, 192}, {14362892, 181}, {14362893, 64}, {7570022, 180}, {7570023, 15}},
				Cycles: 16,
			},
		},
		{
			name: "288 BTST D3, (A4) 0714",
			init: 			cpuState{
				D:   [8]uint32{2634249430, 3739360616, 1969766213, 2066108878, 3029820906, 393833932, 867334309, 2622763700},
				A:   [7]uint32{2131091676, 1365861305, 3895895508, 2695800688, 1219638461, 473882877, 1645500454},
				PC:  6853390,
				SR:  782,
				USP: 1209836,
				SSP: 2379924,
				RAM: [][2]uint32{{6853386, 7}, {6853387, 20}, {6853388, 35}, {6853389, 8}, {11678908, 36}, {11678909, 204}, {6853390, 140}, {6853391, 191}},
			},
			want: 			cpuState{
				D:   [8]uint32{2634249430, 3739360616, 1969766213, 2066108878, 3029820906, 393833932, 867334309, 2622763700},
				A:   [7]uint32{2131091676, 1365861305, 3895895508, 2695800688, 1219638461, 473882877, 1645500454},
				PC:  6853392,
				SR:  778,
				USP: 1209836,
				SSP: 2379924,
				RAM: [][2]uint32{{6853386, 7}, {6853387, 20}, {6853388, 35}, {6853389, 8}, {11678908, 36}, {11678909, 204}, {6853390, 140}, {6853391, 191}},
				Cycles: 8,
			},
		},
		{
			name: "580 BTST D2, (A2)+ 051a",
			init: 			cpuState{
				D:   [8]uint32{3820732113, 2952655582, 3941730998, 1308313290, 867327854, 855956614, 1962418405, 3827836191},
				A:   [7]uint32{3127688285, 3802700081, 3791947656, 752424902, 3679777793, 320286504, 2943360019},
				PC:  3802534,
				SR:  1300,
				USP: 269040,
				SSP: 9548158,
				RAM: [][2]uint32{{3802530, 5}, {3802531, 26}, {3802532, 199}, {3802533, 67}, {296840, 202}, {296841, 216}, {3802534, 237}, {3802535, 6}},
			},
			want: 			cpuState{
				D:   [8]uint32{3820732113, 2952655582, 3941730998, 1308313290, 867327854, 855956614, 1962418405, 3827836191},
				A:   [7]uint32{3127688285, 3802700081, 3791947657, 752424902, 3679777793, 320286504, 2943360019},
				PC:  3802536,
				SR:  1296,
				USP: 269040,
				SSP: 9548158,
				RAM: [][2]uint32{{3802530, 5}, {3802531, 26}, {3802532, 199}, {3802533, 67}, {296840, 202}, {296841, 216}, {3802534, 237}, {3802535, 6}},
				Cycles: 8,
			},
		},
		{
			name: "875 BTST D1, (d8, A3, Xn) 0333",
			init: 			cpuState{
				D:   [8]uint32{690603766, 45097170, 276928306, 2491063327, 1155081692, 1734078450, 1767668975, 2324986900},
				A:   [7]uint32{1160446912, 1281369556, 195813052, 420713126, 3537495721, 3522356991, 4251412095},
				PC:  951644,
				SR:  1308,
				USP: 11108938,
				SSP: 7139284,
				RAM: [][2]uint32{{951640, 3}, {951641, 51}, {951642, 20}, {951643, 185}, {951644, 38}, {951645, 95}, {1291056, 62}, {1291057, 100}, {951646, 157}, {951647, 198}},
			},
			want: 			cpuState{
				D:   [8]uint32{690603766, 45097170, 276928306, 2491063327, 1155081692, 1734078450, 1767668975, 2324986900},
				A:   [7]uint32{1160446912, 1281369556, 195813052, 420713126, 3537495721, 3522356991, 4251412095},
				PC:  951648,
				SR:  1304,
				USP: 11108938,
				SSP: 7139284,
				RAM: [][2]uint32{{951640, 3}, {951641, 51}, {951642, 20}, {951643, 185}, {951644, 38}, {951645, 95}, {1291056, 62}, {1291057, 100}, {951646, 157}, {951647, 198}},
				Cycles: 14,
			},
		},
		{
			name: "1136 BTST D6, (A1)+ 0d19",
			init: 			cpuState{
				D:   [8]uint32{2445444876, 2446349410, 1449240759, 458125975, 555336901, 1004543806, 689301342, 961453782},
				A:   [7]uint32{4016012508, 1837191031, 2011328197, 1926642599, 1546896252, 424241867, 4059489011},
				PC:  11255214,
				SR:  1303,
				USP: 16650210,
				SSP: 12280426,
				RAM: [][2]uint32{{11255210, 13}, {11255211, 25}, {11255212, 76}, {11255213, 207}, {8474486, 0}, {8474487, 80}, {11255214, 214}, {11255215, 240}},
			},
			want: 			cpuState{
				D:   [8]uint32{2445444876, 2446349410, 1449240759, 458125975, 555336901, 1004543806, 689301342, 961453782},
				A:   [7]uint32{4016012508, 1837191032, 2011328197, 1926642599, 1546896252, 424241867, 4059489011},
				PC:  11255216,
				SR:  1299,
				USP: 16650210,
				SSP: 12280426,
				RAM: [][2]uint32{{11255210, 13}, {11255211, 25}, {11255212, 76}, {11255213, 207}, {8474486, 0}, {8474487, 80}, {11255214, 214}, {11255215, 240}},
				Cycles: 8,
			},
		},
		{
			name: "1418 BTST D5, D2 0b02",
			init: 			cpuState{
				D:   [8]uint32{3483570763, 2831161068, 3065993906, 289453986, 1671020277, 1814960422, 1739797390, 2532310556},
				A:   [7]uint32{4184539663, 2907233634, 281246023, 27400374, 97426647, 1040550335, 3651789123},
				PC:  12038914,
				SR:  8969,
				USP: 13482270,
				SSP: 9369332,
				RAM: [][2]uint32{{12038910, 11}, {12038911, 2}, {12038912, 226}, {12038913, 138}, {12038914, 242}, {12038915, 65}},
			},
			want: 			cpuState{
				D:   [8]uint32{3483570763, 2831161068, 3065993906, 289453986, 1671020277, 1814960422, 1739797390, 2532310556},
				A:   [7]uint32{4184539663, 2907233634, 281246023, 27400374, 97426647, 1040550335, 3651789123},
				PC:  12038916,
				SR:  8973,
				USP: 13482270,
				SSP: 9369332,
				RAM: [][2]uint32{{12038910, 11}, {12038911, 2}, {12038912, 226}, {12038913, 138}, {12038914, 242}, {12038915, 65}},
				Cycles: 6,
			},
		},
		{
			name: "1682 BTST D2, -(A6) 0526",
			init: 			cpuState{
				D:   [8]uint32{449567158, 494226500, 3069479887, 778122722, 2693261996, 1329960639, 2158468402, 3876329930},
				A:   [7]uint32{616060970, 3944606796, 1974550884, 3289268090, 2286111050, 2248182249, 2300640594},
				PC:  6750712,
				SR:  1822,
				USP: 706254,
				SSP: 975536,
				RAM: [][2]uint32{{6750708, 5}, {6750709, 38}, {6750710, 96}, {6750711, 208}, {2162000, 30}, {2162001, 31}, {6750712, 236}, {6750713, 198}},
			},
			want: 			cpuState{
				D:   [8]uint32{449567158, 494226500, 3069479887, 778122722, 2693261996, 1329960639, 2158468402, 3876329930},
				A:   [7]uint32{616060970, 3944606796, 1974550884, 3289268090, 2286111050, 2248182249, 2300640593},
				PC:  6750714,
				SR:  1822,
				USP: 706254,
				SSP: 975536,
				RAM: [][2]uint32{{6750708, 5}, {6750709, 38}, {6750710, 96}, {6750711, 208}, {2162000, 30}, {2162001, 31}, {6750712, 236}, {6750713, 198}},
				Cycles: 10,
			},
		},
		{
			name: "1939 BTST D6, D2 0d02",
			init: 			cpuState{
				D:   [8]uint32{3222136935, 862876824, 2131541613, 870586978, 1825883611, 1157598940, 2102553424, 518127599},
				A:   [7]uint32{353064722, 4230350801, 3395299225, 3618000576, 2257406131, 2649249797, 3986584540},
				PC:  16538112,
				SR:  1793,
				USP: 13350898,
				SSP: 8979002,
				RAM: [][2]uint32{{16538108, 13}, {16538109, 2}, {16538110, 45}, {16538111, 254}, {16538112, 30}, {16538113, 56}},
			},
			want: 			cpuState{
				D:   [8]uint32{3222136935, 862876824, 2131541613, 870586978, 1825883611, 1157598940, 2102553424, 518127599},
				A:   [7]uint32{353064722, 4230350801, 3395299225, 3618000576, 2257406131, 2649249797, 3986584540},
				PC:  16538114,
				SR:  1797,
				USP: 13350898,
				SSP: 8979002,
				RAM: [][2]uint32{{16538108, 13}, {16538109, 2}, {16538110, 45}, {16538111, 254}, {16538112, 30}, {16538113, 56}},
				Cycles: 6,
			},
		},
		{
			name: "2208 BTST D2, (A4) 0514",
			init: 			cpuState{
				D:   [8]uint32{2817605463, 91018282, 2434661454, 4139164324, 1177325911, 3588238009, 3261992142, 3653888808},
				A:   [7]uint32{179988408, 46878562, 2831423577, 2362628622, 3296201846, 3964978329, 3619385927},
				PC:  3201614,
				SR:  1809,
				USP: 14289856,
				SSP: 12264976,
				RAM: [][2]uint32{{3201610, 5}, {3201611, 20}, {3201612, 6}, {3201613, 202}, {7867510, 211}, {7867511, 190}, {3201614, 234}, {3201615, 101}},
			},
			want: 			cpuState{
				D:   [8]uint32{2817605463, 91018282, 2434661454, 4139164324, 1177325911, 3588238009, 3261992142, 3653888808},
				A:   [7]uint32{179988408, 46878562, 2831423577, 2362628622, 3296201846, 3964978329, 3619385927},
				PC:  3201616,
				SR:  1809,
				USP: 14289856,
				SSP: 12264976,
				RAM: [][2]uint32{{3201610, 5}, {3201611, 20}, {3201612, 6}, {3201613, 202}, {7867510, 211}, {7867511, 190}, {3201614, 234}, {3201615, 101}},
				Cycles: 8,
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			runTest(t, tt.init, tt.want)
		})
	}
}

func TestBCHG(t *testing.T) {
	tests := []struct {
		name string
		init cpuState
		want cpuState
	}{
		{
			name: "000 BCHG D0, -(A1) 0161",
			init: cpuState{
				D:   [8]uint32{1013149314, 2079776874, 2628387610, 3093919338, 1212947663, 1187050979, 2884907894, 163182458},
				A:   [7]uint32{763790839, 270851509, 1306710656, 466495534, 3398793354, 2050585928, 1615290214},
				PC:  6160198,
				SR:  42511,
				USP: 4945676,
				SSP: 13782418,
				RAM: [][2]uint32{{6160194, 1}, {6160195, 97}, {6160196, 70}, {6160197, 131}, {2416052, 153}, {2416053, 62}, {6160198, 105}, {6160199, 97}},
			},
			want: cpuState{
				D:   [8]uint32{1013149314, 2079776874, 2628387610, 3093919338, 1212947663, 1187050979, 2884907894, 163182458},
				A:   [7]uint32{763790839, 270851508, 1306710656, 466495534, 3398793354, 2050585928, 1615290214},
				PC:  6160200,
				SR:  42511,
				USP: 4945676,
				SSP: 13782418,
				RAM: [][2]uint32{{6160194, 1}, {6160195, 97}, {6160196, 70}, {6160197, 131}, {2416052, 157}, {2416053, 62}, {6160198, 105}, {6160199, 97}},
				Cycles: 14,
			},
		},
		{
			name: "500 BCHG D4, (d8, A7, Xn) 0977",
			init: cpuState{
				D:   [8]uint32{808236924, 2328309522, 4006163875, 813290448, 3202836185, 3045121448, 2733207687, 439060841},
				A:   [7]uint32{3249204345, 377314703, 1803743614, 2711889006, 1584701408, 2674474966, 1377407662},
				PC:  4908434,
				SR:  9490,
				USP: 13813410,
				SSP: 8220026,
				RAM: [][2]uint32{{4908430, 9}, {4908431, 119}, {4908432, 159}, {4908433, 22}, {4908434, 192}, {4908435, 171}, {16435998, 31}, {16435999, 184}, {4908436, 146}, {4908437, 29}},
			},
			want: cpuState{
				D:   [8]uint32{808236924, 2328309522, 4006163875, 813290448, 3202836185, 3045121448, 2733207687, 439060841},
				A:   [7]uint32{3249204345, 377314703, 1803743614, 2711889006, 1584701408, 2674474966, 1377407662},
				PC:  4908438,
				SR:  9494,
				USP: 13813410,
				SSP: 8220026,
				RAM: [][2]uint32{{4908430, 9}, {4908431, 119}, {4908432, 159}, {4908433, 22}, {4908434, 192}, {4908435, 171}, {16435998, 31}, {16435999, 186}, {4908436, 146}, {4908437, 29}},
				Cycles: 18,
			},
		},
		{
			name: "1000 BCHG D3, (A7)+ 075f",
			init: cpuState{
				D:   [8]uint32{700922681, 3874535131, 2486380144, 2677974426, 2416354843, 841056110, 3440692154, 1034725783},
				A:   [7]uint32{2260597330, 2608247250, 2840774464, 447053563, 1403604809, 1819632202, 3566286970},
				PC:  5080404,
				SR:  42760,
				USP: 14551000,
				SSP: 6495492,
				RAM: [][2]uint32{{5080400, 7}, {5080401, 95}, {5080402, 130}, {5080403, 49}, {6495492, 135}, {6495493, 89}, {5080404, 153}, {5080405, 125}},
			},
			want: cpuState{
				D:   [8]uint32{700922681, 3874535131, 2486380144, 2677974426, 2416354843, 841056110, 3440692154, 1034725783},
				A:   [7]uint32{2260597330, 2608247250, 2840774464, 447053563, 1403604809, 1819632202, 3566286970},
				PC:  5080406,
				SR:  42760,
				USP: 14551000,
				SSP: 6495494,
				RAM: [][2]uint32{{5080400, 7}, {5080401, 95}, {5080402, 130}, {5080403, 49}, {6495492, 131}, {6495493, 89}, {5080404, 153}, {5080405, 125}},
				Cycles: 12,
			},
		},
		{
			name: "1500 BCHG D7, (A0)+ 0f58",
			init: cpuState{
				D:   [8]uint32{568928637, 268764371, 3946055634, 985097300, 2885766718, 398433026, 3441768164, 419646532},
				A:   [7]uint32{4236316965, 638460657, 1012734653, 1336325808, 3664237971, 2725359060, 2672044719},
				PC:  4203456,
				SR:  42523,
				USP: 4626072,
				SSP: 7408210,
				RAM: [][2]uint32{{4203452, 15}, {4203453, 88}, {4203454, 244}, {4203455, 204}, {8458532, 240}, {8458533, 196}, {4203456, 84}, {4203457, 13}},
			},
			want: cpuState{
				D:   [8]uint32{568928637, 268764371, 3946055634, 985097300, 2885766718, 398433026, 3441768164, 419646532},
				A:   [7]uint32{4236316966, 638460657, 1012734653, 1336325808, 3664237971, 2725359060, 2672044719},
				PC:  4203458,
				SR:  42527,
				USP: 4626072,
				SSP: 7408210,
				RAM: [][2]uint32{{4203452, 15}, {4203453, 88}, {4203454, 244}, {4203455, 204}, {8458532, 240}, {8458533, 212}, {4203456, 84}, {4203457, 13}},
				Cycles: 12,
			},
		},
		{
			name: "2000 BCHG D3, (d8, A4, Xn) 0774",
			init: cpuState{
				D:   [8]uint32{2807613405, 2204341079, 1160617903, 752021421, 3736986899, 2490761581, 1133764129, 2494292840},
				A:   [7]uint32{4284152489, 1169147781, 2398293448, 2640753339, 3775910918, 4276569533, 2957227910},
				PC:  8989368,
				SR:  42763,
				USP: 1538348,
				SSP: 16454714,
				RAM: [][2]uint32{{8989364, 7}, {8989365, 116}, {8989366, 248}, {8989367, 174}, {8989368, 66}, {8989369, 129}, {714734, 58}, {714735, 215}, {8989370, 19}, {8989371, 111}},
			},
			want: cpuState{
				D:   [8]uint32{2807613405, 2204341079, 1160617903, 752021421, 3736986899, 2490761581, 1133764129, 2494292840},
				A:   [7]uint32{4284152489, 1169147781, 2398293448, 2640753339, 3775910918, 4276569533, 2957227910},
				PC:  8989372,
				SR:  42763,
				USP: 1538348,
				SSP: 16454714,
				RAM: [][2]uint32{{8989364, 7}, {8989365, 116}, {8989366, 248}, {8989367, 174}, {8989368, 66}, {8989369, 129}, {714734, 26}, {714735, 215}, {8989370, 19}, {8989371, 111}},
				Cycles: 18,
			},
		},
		{
			name: "001 BCHG #, (A3) 0853",
			init: 			cpuState{
				D:   [8]uint32{327682556, 378778900, 4105253005, 1936534267, 1318903154, 3164836879, 3653763998, 675268263},
				A:   [7]uint32{3870130380, 3561549826, 3247382229, 751219675, 2315276678, 4289928313, 1871740151},
				PC:  8135414,
				SR:  9759,
				USP: 6724018,
				SSP: 11194984,
				RAM: [][2]uint32{{8135410, 8}, {8135411, 83}, {8135412, 134}, {8135413, 23}, {8135414, 60}, {8135415, 150}, {13022170, 3}, {13022171, 239}, {8135416, 245}, {8135417, 199}},
			},
			want: 			cpuState{
				D:   [8]uint32{327682556, 378778900, 4105253005, 1936534267, 1318903154, 3164836879, 3653763998, 675268263},
				A:   [7]uint32{3870130380, 3561549826, 3247382229, 751219675, 2315276678, 4289928313, 1871740151},
				PC:  8135418,
				SR:  9755,
				USP: 6724018,
				SSP: 11194984,
				RAM: [][2]uint32{{8135410, 8}, {8135411, 83}, {8135412, 134}, {8135413, 23}, {8135414, 60}, {8135415, 150}, {13022170, 3}, {13022171, 111}, {8135416, 245}, {8135417, 199}},
				Cycles: 16,
			},
		},
		{
			name: "273 BCHG D2, -(A7) 0567",
			init: 			cpuState{
				D:   [8]uint32{1722647823, 1963790406, 1842561436, 642553006, 1811697533, 1325126413, 1311432428, 1491601991},
				A:   [7]uint32{3958583882, 4242464847, 719000169, 3440196205, 1839353521, 659673118, 1513419504},
				PC:  7038098,
				SR:  797,
				USP: 11360054,
				SSP: 6787744,
				RAM: [][2]uint32{{7038094, 5}, {7038095, 103}, {7038096, 254}, {7038097, 113}, {11360052, 99}, {11360053, 9}, {7038098, 94}, {7038099, 175}},
			},
			want: 			cpuState{
				D:   [8]uint32{1722647823, 1963790406, 1842561436, 642553006, 1811697533, 1325126413, 1311432428, 1491601991},
				A:   [7]uint32{3958583882, 4242464847, 719000169, 3440196205, 1839353521, 659673118, 1513419504},
				PC:  7038100,
				SR:  797,
				USP: 11360052,
				SSP: 6787744,
				RAM: [][2]uint32{{7038094, 5}, {7038095, 103}, {7038096, 254}, {7038097, 113}, {11360052, 115}, {11360053, 9}, {7038098, 94}, {7038099, 175}},
				Cycles: 14,
			},
		},
		{
			name: "572 BCHG #, (d16, A2) 086a",
			init: 			cpuState{
				D:   [8]uint32{1492420158, 3982548017, 1426163888, 3647666915, 1771652573, 405708842, 255522989, 828236627},
				A:   [7]uint32{3048497082, 1251672708, 226065598, 3560893882, 1561866831, 3758330484, 1419933736},
				PC:  1031496,
				SR:  1561,
				USP: 6877768,
				SSP: 3738576,
				RAM: [][2]uint32{{1031492, 8}, {1031493, 106}, {1031494, 10}, {1031495, 134}, {1031496, 237}, {1031497, 241}, {1031498, 114}, {1031499, 236}, {7957166, 119}, {7957167, 146}, {1031500, 64}, {1031501, 234}},
			},
			want: 			cpuState{
				D:   [8]uint32{1492420158, 3982548017, 1426163888, 3647666915, 1771652573, 405708842, 255522989, 828236627},
				A:   [7]uint32{3048497082, 1251672708, 226065598, 3560893882, 1561866831, 3758330484, 1419933736},
				PC:  1031502,
				SR:  1565,
				USP: 6877768,
				SSP: 3738576,
				RAM: [][2]uint32{{1031492, 8}, {1031493, 106}, {1031494, 10}, {1031495, 134}, {1031496, 237}, {1031497, 241}, {1031498, 114}, {1031499, 236}, {7957166, 119}, {7957167, 210}, {1031500, 64}, {1031501, 234}},
				Cycles: 20,
			},
		},
		{
			name: "820 BCHG #, (A6) 0856",
			init: 			cpuState{
				D:   [8]uint32{2861068129, 3637703460, 1536676169, 2104090425, 308094402, 3166941928, 654537409, 3923333216},
				A:   [7]uint32{1598900043, 3973830345, 2472709738, 3883458253, 2999786080, 491530732, 2880298344},
				PC:  1122302,
				SR:  1281,
				USP: 12310922,
				SSP: 16537840,
				RAM: [][2]uint32{{1122298, 8}, {1122299, 86}, {1122300, 249}, {1122301, 124}, {1122302, 81}, {1122303, 2}, {11394408, 98}, {11394409, 153}, {1122304, 236}, {1122305, 114}},
			},
			want: 			cpuState{
				D:   [8]uint32{2861068129, 3637703460, 1536676169, 2104090425, 308094402, 3166941928, 654537409, 3923333216},
				A:   [7]uint32{1598900043, 3973830345, 2472709738, 3883458253, 2999786080, 491530732, 2880298344},
				PC:  1122306,
				SR:  1285,
				USP: 12310922,
				SSP: 16537840,
				RAM: [][2]uint32{{1122298, 8}, {1122299, 86}, {1122300, 249}, {1122301, 124}, {1122302, 81}, {1122303, 2}, {11394408, 114}, {11394409, 153}, {1122304, 236}, {1122305, 114}},
				Cycles: 16,
			},
		},
		{
			name: "1113 BCHG #, (A2) 0852",
			init: 			cpuState{
				D:   [8]uint32{1999772884, 2945453278, 3695789199, 914654229, 3755636832, 1702171890, 3041019691, 4133666585},
				A:   [7]uint32{4035593659, 696452051, 1245360413, 3732537570, 807345742, 3675623081, 641136703},
				PC:  2227966,
				SR:  1307,
				USP: 13243542,
				SSP: 15910278,
				RAM: [][2]uint32{{2227962, 8}, {2227963, 82}, {2227964, 42}, {2227965, 120}, {2227966, 52}, {2227967, 6}, {3846428, 246}, {3846429, 26}, {2227968, 139}, {2227969, 156}},
			},
			want: 			cpuState{
				D:   [8]uint32{1999772884, 2945453278, 3695789199, 914654229, 3755636832, 1702171890, 3041019691, 4133666585},
				A:   [7]uint32{4035593659, 696452051, 1245360413, 3732537570, 807345742, 3675623081, 641136703},
				PC:  2227970,
				SR:  1311,
				USP: 13243542,
				SSP: 15910278,
				RAM: [][2]uint32{{2227962, 8}, {2227963, 82}, {2227964, 42}, {2227965, 120}, {2227966, 52}, {2227967, 6}, {3846428, 246}, {3846429, 27}, {2227968, 139}, {2227969, 156}},
				Cycles: 16,
			},
		},
		{
			name: "1419 BCHG D0, (A2) 0152",
			init: 			cpuState{
				D:   [8]uint32{22150538, 4287783995, 244533014, 1620962612, 2856159441, 685776393, 771478489, 4150063686},
				A:   [7]uint32{1983696310, 4104086425, 2482337876, 779946803, 722871469, 1239421408, 4075433210},
				PC:  505442,
				SR:  9234,
				USP: 9144686,
				SSP: 2065422,
				RAM: [][2]uint32{{505438, 1}, {505439, 82}, {505440, 243}, {505441, 213}, {16087124, 217}, {16087125, 249}, {505442, 246}, {505443, 193}},
			},
			want: 			cpuState{
				D:   [8]uint32{22150538, 4287783995, 244533014, 1620962612, 2856159441, 685776393, 771478489, 4150063686},
				A:   [7]uint32{1983696310, 4104086425, 2482337876, 779946803, 722871469, 1239421408, 4075433210},
				PC:  505444,
				SR:  9238,
				USP: 9144686,
				SSP: 2065422,
				RAM: [][2]uint32{{505438, 1}, {505439, 82}, {505440, 243}, {505441, 213}, {16087124, 221}, {16087125, 249}, {505442, 246}, {505443, 193}},
				Cycles: 12,
			},
		},
		{
			name: "1686 BCHG D6, (A5) 0d55",
			init: 			cpuState{
				D:   [8]uint32{3407955689, 1871441733, 368617696, 667437611, 1205900661, 3685885743, 93607492, 3192549006},
				A:   [7]uint32{2131989658, 2919669354, 390092128, 744553789, 4199184010, 3593200075, 3747920811},
				PC:  8262398,
				SR:  785,
				USP: 15985396,
				SSP: 7425636,
				RAM: [][2]uint32{{8262394, 13}, {8262395, 85}, {8262396, 128}, {8262397, 253}, {2875850, 91}, {2875851, 122}, {8262398, 161}, {8262399, 250}},
			},
			want: 			cpuState{
				D:   [8]uint32{3407955689, 1871441733, 368617696, 667437611, 1205900661, 3685885743, 93607492, 3192549006},
				A:   [7]uint32{2131989658, 2919669354, 390092128, 744553789, 4199184010, 3593200075, 3747920811},
				PC:  8262400,
				SR:  785,
				USP: 15985396,
				SSP: 7425636,
				RAM: [][2]uint32{{8262394, 13}, {8262395, 85}, {8262396, 128}, {8262397, 253}, {2875850, 91}, {2875851, 106}, {8262398, 161}, {8262399, 250}},
				Cycles: 12,
			},
		},
		{
			name: "1963 BCHG D0, (A3) 0153",
			init: 			cpuState{
				D:   [8]uint32{218630480, 172474235, 1354060609, 3487700673, 3816505221, 2234978527, 3338041262, 3696947652},
				A:   [7]uint32{1908942583, 3828812984, 1352426597, 1274340286, 214642439, 906382397, 1620614432},
				PC:  10872220,
				SR:  1539,
				USP: 14112260,
				SSP: 12593488,
				RAM: [][2]uint32{{10872216, 1}, {10872217, 83}, {10872218, 75}, {10872219, 31}, {16049086, 59}, {16049087, 240}, {10872220, 57}, {10872221, 222}},
			},
			want: 			cpuState{
				D:   [8]uint32{218630480, 172474235, 1354060609, 3487700673, 3816505221, 2234978527, 3338041262, 3696947652},
				A:   [7]uint32{1908942583, 3828812984, 1352426597, 1274340286, 214642439, 906382397, 1620614432},
				PC:  10872222,
				SR:  1539,
				USP: 14112260,
				SSP: 12593488,
				RAM: [][2]uint32{{10872216, 1}, {10872217, 83}, {10872218, 75}, {10872219, 31}, {16049086, 58}, {16049087, 240}, {10872220, 57}, {10872221, 222}},
				Cycles: 12,
			},
		},
		{
			name: "2244 BCHG D2, (d16, A5) 056d",
			init: 			cpuState{
				D:   [8]uint32{3540172195, 1157782832, 3801740627, 676016171, 120044022, 4265848495, 2055524099, 2396276173},
				A:   [7]uint32{2001419240, 2258558340, 4083291534, 1203744206, 4246488985, 1858723854, 3497425071},
				PC:  11967822,
				SR:  530,
				USP: 1201960,
				SSP: 13811500,
				RAM: [][2]uint32{{11967818, 5}, {11967819, 109}, {11967820, 61}, {11967821, 135}, {11967822, 110}, {11967823, 42}, {13245844, 45}, {13245845, 238}, {11967824, 101}, {11967825, 194}},
			},
			want: 			cpuState{
				D:   [8]uint32{3540172195, 1157782832, 3801740627, 676016171, 120044022, 4265848495, 2055524099, 2396276173},
				A:   [7]uint32{2001419240, 2258558340, 4083291534, 1203744206, 4246488985, 1858723854, 3497425071},
				PC:  11967826,
				SR:  530,
				USP: 1201960,
				SSP: 13811500,
				RAM: [][2]uint32{{11967818, 5}, {11967819, 109}, {11967820, 61}, {11967821, 135}, {11967822, 110}, {11967823, 42}, {13245844, 45}, {13245845, 230}, {11967824, 101}, {11967825, 194}},
				Cycles: 16,
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			runTest(t, tt.init, tt.want)
		})
	}
}

func TestBCLR(t *testing.T) {
	tests := []struct {
		name string
		init cpuState
		want cpuState
	}{
		{
			name: "000 BCLR D3, (A1)+ 0799",
			init: cpuState{
				D:   [8]uint32{1846080252, 3858376002, 3133883255, 3257995552, 3880319835, 3116722484, 751787456, 1185313225},
				A:   [7]uint32{1206991703, 847336910, 963978686, 1089955452, 734752850, 2028511002, 3551725147},
				PC:  10354148,
				SR:  8991,
				USP: 11588256,
				SSP: 8161968,
				RAM: [][2]uint32{{10354144, 7}, {10354145, 153}, {10354146, 230}, {10354147, 183}, {8476110, 249}, {8476111, 195}, {10354148, 61}, {10354149, 223}},
			},
			want: cpuState{
				D:   [8]uint32{1846080252, 3858376002, 3133883255, 3257995552, 3880319835, 3116722484, 751787456, 1185313225},
				A:   [7]uint32{1206991703, 847336911, 963978686, 1089955452, 734752850, 2028511002, 3551725147},
				PC:  10354150,
				SR:  8987,
				USP: 11588256,
				SSP: 8161968,
				RAM: [][2]uint32{{10354144, 7}, {10354145, 153}, {10354146, 230}, {10354147, 183}, {8476110, 248}, {8476111, 195}, {10354148, 61}, {10354149, 223}},
				Cycles: 12,
			},
		},
		{
			name: "500 BCLR D1, (A4) 0394",
			init: cpuState{
				D:   [8]uint32{924779116, 1354656134, 965052202, 3749788472, 433086925, 4090553060, 2311661032, 3534978670},
				A:   [7]uint32{1195758221, 2224595464, 1780513037, 2875327096, 2305747679, 950932814, 3971200180},
				PC:  6280390,
				SR:  40964,
				USP: 8385408,
				SSP: 13286398,
				RAM: [][2]uint32{{6280386, 3}, {6280387, 148}, {6280388, 144}, {6280389, 247}, {7269086, 85}, {7269087, 175}, {6280390, 242}, {6280391, 81}},
			},
			want: cpuState{
				D:   [8]uint32{924779116, 1354656134, 965052202, 3749788472, 433086925, 4090553060, 2311661032, 3534978670},
				A:   [7]uint32{1195758221, 2224595464, 1780513037, 2875327096, 2305747679, 950932814, 3971200180},
				PC:  6280392,
				SR:  40964,
				USP: 8385408,
				SSP: 13286398,
				RAM: [][2]uint32{{6280386, 3}, {6280387, 148}, {6280388, 144}, {6280389, 247}, {7269086, 85}, {7269087, 175}, {6280390, 242}, {6280391, 81}},
				Cycles: 12,
			},
		},
		{
			name: "1000 BCLR D6, -(A4) 0da4",
			init: cpuState{
				D:   [8]uint32{3988890443, 4241621861, 3659192164, 2270234259, 4099245621, 3746345387, 1685194632, 1565095028},
				A:   [7]uint32{3452661473, 1289207620, 2938261569, 2753517800, 1101485566, 2096393758, 93126641},
				PC:  3689194,
				SR:  41755,
				USP: 16319248,
				SSP: 5975912,
				RAM: [][2]uint32{{3689190, 13}, {3689191, 164}, {3689192, 84}, {3689193, 19}, {10966524, 221}, {10966525, 147}, {3689194, 122}, {3689195, 184}},
			},
			want: cpuState{
				D:   [8]uint32{3988890443, 4241621861, 3659192164, 2270234259, 4099245621, 3746345387, 1685194632, 1565095028},
				A:   [7]uint32{3452661473, 1289207620, 2938261569, 2753517800, 1101485565, 2096393758, 93126641},
				PC:  3689196,
				SR:  41755,
				USP: 16319248,
				SSP: 5975912,
				RAM: [][2]uint32{{3689190, 13}, {3689191, 164}, {3689192, 84}, {3689193, 19}, {10966524, 221}, {10966525, 146}, {3689194, 122}, {3689195, 184}},
				Cycles: 14,
			},
		},
		{
			name: "1500 BCLR D3, D1 0781",
			init: cpuState{
				D:   [8]uint32{934098513, 2960310304, 2380172950, 3249224116, 3534651940, 2672829662, 3060292789, 884605936},
				A:   [7]uint32{1360848417, 2960323537, 877969487, 1438447333, 2982199743, 2341082898, 910399416},
				PC:  8810362,
				SR:  40981,
				USP: 4622832,
				SSP: 758064,
				RAM: [][2]uint32{{8810358, 7}, {8810359, 129}, {8810360, 50}, {8810361, 81}, {8810362, 62}, {8810363, 96}},
			},
			want: cpuState{
				D:   [8]uint32{934098513, 2959261728, 2380172950, 3249224116, 3534651940, 2672829662, 3060292789, 884605936},
				A:   [7]uint32{1360848417, 2960323537, 877969487, 1438447333, 2982199743, 2341082898, 910399416},
				PC:  8810364,
				SR:  40977,
				USP: 4622832,
				SSP: 758064,
				RAM: [][2]uint32{{8810358, 7}, {8810359, 129}, {8810360, 50}, {8810361, 81}, {8810362, 62}, {8810363, 96}},
				Cycles: 10,
			},
		},
		{
			name: "2000 BCLR D0, D3 0183",
			init: cpuState{
				D:   [8]uint32{3950236385, 1284323536, 2682172682, 84965637, 2550654512, 2988662606, 3447995926, 784319453},
				A:   [7]uint32{3182303238, 1404712716, 1636464048, 3718023400, 1957730729, 1323827978, 257669311},
				PC:  11791478,
				SR:  1822,
				USP: 14077216,
				SSP: 3375564,
				RAM: [][2]uint32{{11791474, 1}, {11791475, 131}, {11791476, 241}, {11791477, 193}, {11791478, 127}, {11791479, 213}},
			},
			want: cpuState{
				D:   [8]uint32{3950236385, 1284323536, 2682172682, 84965637, 2550654512, 2988662606, 3447995926, 784319453},
				A:   [7]uint32{3182303238, 1404712716, 1636464048, 3718023400, 1957730729, 1323827978, 257669311},
				PC:  11791480,
				SR:  1822,
				USP: 14077216,
				SSP: 3375564,
				RAM: [][2]uint32{{11791474, 1}, {11791475, 131}, {11791476, 241}, {11791477, 193}, {11791478, 127}, {11791479, 213}},
				Cycles: 8,
			},
		},
		{
			name: "002 BCLR #, (d16, A4) 08ac",
			init: 			cpuState{
				D:   [8]uint32{3808116898, 2302361218, 1241496143, 1603249365, 100485495, 1211842912, 1148087246, 1787908679},
				A:   [7]uint32{4013891064, 191039196, 1777283396, 2522844071, 3366754860, 3805082046, 1210665390},
				PC:  442230,
				SR:  9742,
				USP: 10452130,
				SSP: 4566508,
				RAM: [][2]uint32{{442226, 8}, {442227, 172}, {442228, 62}, {442229, 220}, {442230, 29}, {442231, 180}, {442232, 95}, {442233, 103}, {11319264, 160}, {11319265, 238}, {442234, 154}, {442235, 106}},
			},
			want: 			cpuState{
				D:   [8]uint32{3808116898, 2302361218, 1241496143, 1603249365, 100485495, 1211842912, 1148087246, 1787908679},
				A:   [7]uint32{4013891064, 191039196, 1777283396, 2522844071, 3366754860, 3805082046, 1210665390},
				PC:  442236,
				SR:  9742,
				USP: 10452130,
				SSP: 4566508,
				RAM: [][2]uint32{{442226, 8}, {442227, 172}, {442228, 62}, {442229, 220}, {442230, 29}, {442231, 180}, {442232, 95}, {442233, 103}, {11319264, 160}, {11319265, 238}, {442234, 154}, {442235, 106}},
				Cycles: 20,
			},
		},
		{
			name: "262 BCLR D7, (d16, A0) 0fa8",
			init: 			cpuState{
				D:   [8]uint32{4247517641, 2397376760, 1092821275, 23186801, 630715641, 4293374956, 2885346088, 1327236948},
				A:   [7]uint32{192089661, 3587390918, 2994875252, 3491516183, 596240164, 3432497305, 1856738187},
				PC:  27498,
				SR:  23,
				USP: 666814,
				SSP: 16738802,
				RAM: [][2]uint32{{27494, 15}, {27495, 168}, {27496, 243}, {27497, 187}, {27498, 30}, {27499, 47}, {7537144, 204}, {7537145, 239}, {27500, 32}, {27501, 167}},
			},
			want: 			cpuState{
				D:   [8]uint32{4247517641, 2397376760, 1092821275, 23186801, 630715641, 4293374956, 2885346088, 1327236948},
				A:   [7]uint32{192089661, 3587390918, 2994875252, 3491516183, 596240164, 3432497305, 1856738187},
				PC:  27502,
				SR:  23,
				USP: 666814,
				SSP: 16738802,
				RAM: [][2]uint32{{27494, 15}, {27495, 168}, {27496, 243}, {27497, 187}, {27498, 30}, {27499, 47}, {7537144, 204}, {7537145, 239}, {27500, 32}, {27501, 167}},
				Cycles: 16,
			},
		},
		{
			name: "556 BCLR D0, D7 0187",
			init: 			cpuState{
				D:   [8]uint32{3828006857, 300926794, 3928584840, 2650791029, 728718472, 680689710, 508279637, 41103523},
				A:   [7]uint32{2978846677, 1516136072, 1141484661, 1995492934, 3394530889, 3392942340, 3057447122},
				PC:  13367486,
				SR:  1032,
				USP: 14276964,
				SSP: 2530078,
				RAM: [][2]uint32{{13367482, 1}, {13367483, 135}, {13367484, 44}, {13367485, 249}, {13367486, 39}, {13367487, 51}},
			},
			want: 			cpuState{
				D:   [8]uint32{3828006857, 300926794, 3928584840, 2650791029, 728718472, 680689710, 508279637, 41103523},
				A:   [7]uint32{2978846677, 1516136072, 1141484661, 1995492934, 3394530889, 3392942340, 3057447122},
				PC:  13367488,
				SR:  1036,
				USP: 14276964,
				SSP: 2530078,
				RAM: [][2]uint32{{13367482, 1}, {13367483, 135}, {13367484, 44}, {13367485, 249}, {13367486, 39}, {13367487, 51}},
				Cycles: 8,
			},
		},
		{
			name: "850 BCLR D7, (d8, A7, Xn) 0fb7",
			init: 			cpuState{
				D:   [8]uint32{1878510903, 540384602, 1296089979, 1209931032, 1645879826, 4143831200, 3762254404, 2180612202},
				A:   [7]uint32{109609505, 1808549481, 402959952, 3226431217, 440858379, 701391214, 3291132944},
				PC:  13350052,
				SR:  1538,
				USP: 9988248,
				SSP: 4043568,
				RAM: [][2]uint32{{13350048, 15}, {13350049, 183}, {13350050, 149}, {13350051, 170}, {13350052, 110}, {13350053, 119}, {10006186, 245}, {10006187, 113}, {13350054, 231}, {13350055, 151}},
			},
			want: 			cpuState{
				D:   [8]uint32{1878510903, 540384602, 1296089979, 1209931032, 1645879826, 4143831200, 3762254404, 2180612202},
				A:   [7]uint32{109609505, 1808549481, 402959952, 3226431217, 440858379, 701391214, 3291132944},
				PC:  13350056,
				SR:  1542,
				USP: 9988248,
				SSP: 4043568,
				RAM: [][2]uint32{{13350048, 15}, {13350049, 183}, {13350050, 149}, {13350051, 170}, {13350052, 110}, {13350053, 119}, {10006186, 245}, {10006187, 113}, {13350054, 231}, {13350055, 151}},
				Cycles: 18,
			},
		},
		{
			name: "1125 BCLR D1, (d16, A6) 03ae",
			init: 			cpuState{
				D:   [8]uint32{3933277808, 3723908825, 2750481739, 501588963, 3221042034, 969653309, 768140482, 1853443223},
				A:   [7]uint32{1552773191, 607786102, 8899645, 2812132137, 422844508, 2052113503, 806639592},
				PC:  14959138,
				SR:  1289,
				USP: 12483294,
				SSP: 13949066,
				RAM: [][2]uint32{{14959134, 3}, {14959135, 174}, {14959136, 152}, {14959137, 235}, {14959138, 214}, {14959139, 200}, {1306834, 227}, {1306835, 5}, {14959140, 75}, {14959141, 53}},
			},
			want: 			cpuState{
				D:   [8]uint32{3933277808, 3723908825, 2750481739, 501588963, 3221042034, 969653309, 768140482, 1853443223},
				A:   [7]uint32{1552773191, 607786102, 8899645, 2812132137, 422844508, 2052113503, 806639592},
				PC:  14959142,
				SR:  1293,
				USP: 12483294,
				SSP: 13949066,
				RAM: [][2]uint32{{14959134, 3}, {14959135, 174}, {14959136, 152}, {14959137, 235}, {14959138, 214}, {14959139, 200}, {1306834, 227}, {1306835, 5}, {14959140, 75}, {14959141, 53}},
				Cycles: 16,
			},
		},
		{
			name: "1395 BCLR D2, (d8, A7, Xn) 05b7",
			init: 			cpuState{
				D:   [8]uint32{1538611154, 2192086372, 3433375791, 2079901595, 138318883, 4045288820, 4154724756, 3527253416},
				A:   [7]uint32{3139569926, 835591201, 1054025435, 2968220144, 2687029714, 2089895544, 3400728427},
				PC:  10579506,
				SR:  8459,
				USP: 14736292,
				SSP: 12479204,
				RAM: [][2]uint32{{10579502, 5}, {10579503, 183}, {10579504, 100}, {10579505, 23}, {10579506, 23}, {10579507, 110}, {12483726, 128}, {12483727, 191}, {10579508, 17}, {10579509, 207}},
			},
			want: 			cpuState{
				D:   [8]uint32{1538611154, 2192086372, 3433375791, 2079901595, 138318883, 4045288820, 4154724756, 3527253416},
				A:   [7]uint32{3139569926, 835591201, 1054025435, 2968220144, 2687029714, 2089895544, 3400728427},
				PC:  10579510,
				SR:  8459,
				USP: 14736292,
				SSP: 12479204,
				RAM: [][2]uint32{{10579502, 5}, {10579503, 183}, {10579504, 100}, {10579505, 23}, {10579506, 23}, {10579507, 110}, {12483726, 128}, {12483727, 63}, {10579508, 17}, {10579509, 207}},
				Cycles: 18,
			},
		},
		{
			name: "1675 BCLR D3, D6 0786",
			init: 			cpuState{
				D:   [8]uint32{2004894163, 1588427952, 1963051024, 1546818060, 4224587085, 1977384584, 1982442221, 4131762535},
				A:   [7]uint32{3708590932, 839443515, 473468880, 2770880424, 1168051153, 510057875, 3886118987},
				PC:  14918406,
				SR:  1282,
				USP: 4589206,
				SSP: 12399790,
				RAM: [][2]uint32{{14918402, 7}, {14918403, 134}, {14918404, 64}, {14918405, 172}, {14918406, 208}, {14918407, 141}},
			},
			want: 			cpuState{
				D:   [8]uint32{2004894163, 1588427952, 1963051024, 1546818060, 4224587085, 1977384584, 1982442221, 4131762535},
				A:   [7]uint32{3708590932, 839443515, 473468880, 2770880424, 1168051153, 510057875, 3886118987},
				PC:  14918408,
				SR:  1286,
				USP: 4589206,
				SSP: 12399790,
				RAM: [][2]uint32{{14918402, 7}, {14918403, 134}, {14918404, 64}, {14918405, 172}, {14918406, 208}, {14918407, 141}},
				Cycles: 8,
			},
		},
		{
			name: "1953 BCLR D3, (xxx).w 07b8",
			init: 			cpuState{
				D:   [8]uint32{733878693, 1420546489, 532366001, 3879974994, 3848019796, 3115549950, 1200716637, 53040188},
				A:   [7]uint32{984505850, 2294794718, 3003994192, 3138623878, 1369325771, 2340547368, 2303681407},
				PC:  1293704,
				SR:  798,
				USP: 7665942,
				SSP: 13989806,
				RAM: [][2]uint32{{1293700, 7}, {1293701, 184}, {1293702, 108}, {1293703, 20}, {1293704, 17}, {1293705, 33}, {27668, 81}, {27669, 87}, {1293706, 132}, {1293707, 187}},
			},
			want: 			cpuState{
				D:   [8]uint32{733878693, 1420546489, 532366001, 3879974994, 3848019796, 3115549950, 1200716637, 53040188},
				A:   [7]uint32{984505850, 2294794718, 3003994192, 3138623878, 1369325771, 2340547368, 2303681407},
				PC:  1293708,
				SR:  798,
				USP: 7665942,
				SSP: 13989806,
				RAM: [][2]uint32{{1293700, 7}, {1293701, 184}, {1293702, 108}, {1293703, 20}, {1293704, 17}, {1293705, 33}, {27668, 81}, {27669, 87}, {1293706, 132}, {1293707, 187}},
				Cycles: 16,
			},
		},
		{
			name: "2233 BCLR D6, (A5)+ 0d9d",
			init: 			cpuState{
				D:   [8]uint32{61555807, 1405236560, 4205888207, 241692109, 765753800, 358028266, 525423580, 3104210650},
				A:   [7]uint32{92952165, 977958316, 4192503323, 717445259, 856480811, 3349276818, 2416232777},
				PC:  1760728,
				SR:  9497,
				USP: 5426240,
				SSP: 5453548,
				RAM: [][2]uint32{{1760724, 13}, {1760725, 157}, {1760726, 28}, {1760727, 14}, {10610834, 55}, {10610835, 152}, {1760728, 179}, {1760729, 51}},
			},
			want: 			cpuState{
				D:   [8]uint32{61555807, 1405236560, 4205888207, 241692109, 765753800, 358028266, 525423580, 3104210650},
				A:   [7]uint32{92952165, 977958316, 4192503323, 717445259, 856480811, 3349276819, 2416232777},
				PC:  1760730,
				SR:  9497,
				USP: 5426240,
				SSP: 5453548,
				RAM: [][2]uint32{{1760724, 13}, {1760725, 157}, {1760726, 28}, {1760727, 14}, {10610834, 39}, {10610835, 152}, {1760728, 179}, {1760729, 51}},
				Cycles: 12,
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			runTest(t, tt.init, tt.want)
		})
	}
}

func TestBSET(t *testing.T) {
	tests := []struct {
		name string
		init cpuState
		want cpuState
	}{
		{
			name: "000 BSET D3, (d8, A0, Xn) 07f0",
			init: cpuState{
				D:   [8]uint32{2962023366, 2482580210, 932863521, 2287903684, 3334633517, 2329412468, 2679143256, 1584390542},
				A:   [7]uint32{1651939397, 2364158735, 25350572, 1616996840, 3261310075, 3663937633, 2461090985},
				PC:  16528236,
				SR:  41218,
				USP: 10269570,
				SSP: 15175068,
				RAM: [][2]uint32{{16528232, 7}, {16528233, 240}, {16528234, 138}, {16528235, 168}, {16528236, 120}, {16528237, 22}, {15544370, 62}, {15544371, 117}, {16528238, 117}, {16528239, 4}},
			},
			want: cpuState{
				D:   [8]uint32{2962023366, 2482580210, 932863521, 2287903684, 3334633517, 2329412468, 2679143256, 1584390542},
				A:   [7]uint32{1651939397, 2364158735, 25350572, 1616996840, 3261310075, 3663937633, 2461090985},
				PC:  16528240,
				SR:  41218,
				USP: 10269570,
				SSP: 15175068,
				RAM: [][2]uint32{{16528232, 7}, {16528233, 240}, {16528234, 138}, {16528235, 168}, {16528236, 120}, {16528237, 22}, {15544370, 62}, {15544371, 117}, {16528238, 117}, {16528239, 4}},
				Cycles: 18,
			},
		},
		{
			name: "500 BSET D5, (A6) 0bd6",
			init: cpuState{
				D:   [8]uint32{3508786574, 2028324343, 1718994470, 3603533751, 1011949408, 3394951692, 1031101671, 2037339957},
				A:   [7]uint32{2272579427, 2660662297, 2325576678, 2834564661, 2041274466, 2003781054, 3529586227},
				PC:  16220020,
				SR:  1030,
				USP: 3475638,
				SSP: 4615488,
				RAM: [][2]uint32{{16220016, 11}, {16220017, 214}, {16220018, 178}, {16220019, 173}, {6370866, 252}, {6370867, 3}, {16220020, 245}, {16220021, 225}},
			},
			want: cpuState{
				D:   [8]uint32{3508786574, 2028324343, 1718994470, 3603533751, 1011949408, 3394951692, 1031101671, 2037339957},
				A:   [7]uint32{2272579427, 2660662297, 2325576678, 2834564661, 2041274466, 2003781054, 3529586227},
				PC:  16220022,
				SR:  1030,
				USP: 3475638,
				SSP: 4615488,
				RAM: [][2]uint32{{16220016, 11}, {16220017, 214}, {16220018, 178}, {16220019, 173}, {6370866, 252}, {6370867, 19}, {16220020, 245}, {16220021, 225}},
				Cycles: 12,
			},
		},
		{
			name: "1000 BSET D7, (A0)+ 0fd8",
			init: cpuState{
				D:   [8]uint32{3167391406, 421253711, 4149799400, 924853522, 1483142837, 3007600275, 841190735, 1127532473},
				A:   [7]uint32{1238082436, 626831372, 2497479834, 580864854, 1311438457, 1511204449, 852062506},
				PC:  9578196,
				SR:  770,
				USP: 5823868,
				SSP: 1883288,
				RAM: [][2]uint32{{9578192, 15}, {9578193, 216}, {9578194, 74}, {9578195, 21}, {13345668, 125}, {13345669, 58}, {9578196, 89}, {9578197, 116}},
			},
			want: cpuState{
				D:   [8]uint32{3167391406, 421253711, 4149799400, 924853522, 1483142837, 3007600275, 841190735, 1127532473},
				A:   [7]uint32{1238082437, 626831372, 2497479834, 580864854, 1311438457, 1511204449, 852062506},
				PC:  9578198,
				SR:  774,
				USP: 5823868,
				SSP: 1883288,
				RAM: [][2]uint32{{9578192, 15}, {9578193, 216}, {9578194, 74}, {9578195, 21}, {13345668, 127}, {13345669, 58}, {9578196, 89}, {9578197, 116}},
				Cycles: 12,
			},
		},
		{
			name: "1500 BSET D5, (d16, A6) 0bee",
			init: cpuState{
				D:   [8]uint32{3894034595, 1716187724, 587748032, 443189928, 3440174616, 2708820926, 1902260627, 1216512883},
				A:   [7]uint32{191899901, 3007884842, 1151745322, 2937206102, 3102075939, 2370515136, 2579915195},
				PC:  4691250,
				SR:  265,
				USP: 32854,
				SSP: 7562170,
				RAM: [][2]uint32{{4691246, 11}, {4691247, 238}, {4691248, 198}, {4691249, 5}, {4691250, 78}, {4691251, 70}, {12986304, 105}, {12986305, 97}, {4691252, 113}, {4691253, 67}},
			},
			want: cpuState{
				D:   [8]uint32{3894034595, 1716187724, 587748032, 443189928, 3440174616, 2708820926, 1902260627, 1216512883},
				A:   [7]uint32{191899901, 3007884842, 1151745322, 2937206102, 3102075939, 2370515136, 2579915195},
				PC:  4691254,
				SR:  265,
				USP: 32854,
				SSP: 7562170,
				RAM: [][2]uint32{{4691246, 11}, {4691247, 238}, {4691248, 198}, {4691249, 5}, {4691250, 78}, {4691251, 70}, {12986304, 105}, {12986305, 97}, {4691252, 113}, {4691253, 67}},
				Cycles: 16,
			},
		},
		{
			name: "2000 BSET D6, -(A2) 0de2",
			init: cpuState{
				D:   [8]uint32{3853645441, 2423355303, 993505953, 4208043640, 3504157559, 1341606935, 1042090885, 2342835483},
				A:   [7]uint32{693600950, 2811164785, 3427399036, 4123042480, 1200479161, 619507113, 56235949},
				PC:  7771250,
				SR:  33038,
				USP: 12483292,
				SSP: 2351436,
				RAM: [][2]uint32{{7771246, 13}, {7771247, 226}, {7771248, 201}, {7771249, 174}, {4846970, 202}, {4846971, 17}, {7771250, 103}, {7771251, 108}},
			},
			want: cpuState{
				D:   [8]uint32{3853645441, 2423355303, 993505953, 4208043640, 3504157559, 1341606935, 1042090885, 2342835483},
				A:   [7]uint32{693600950, 2811164785, 3427399035, 4123042480, 1200479161, 619507113, 56235949},
				PC:  7771252,
				SR:  33038,
				USP: 12483292,
				SSP: 2351436,
				RAM: [][2]uint32{{7771246, 13}, {7771247, 226}, {7771248, 201}, {7771249, 174}, {4846970, 202}, {4846971, 49}, {7771250, 103}, {7771251, 108}},
				Cycles: 14,
			},
		},
		{
			name: "003 BSET D0, (d16, A7) 01ef",
			init: 			cpuState{
				D:   [8]uint32{4254957524, 479950994, 746463964, 746026841, 30675182, 379055595, 2731896287, 3680621813},
				A:   [7]uint32{2377075333, 570434985, 2522680407, 1806635448, 1311629403, 3494014000, 1438732441},
				PC:  5140628,
				SR:  8469,
				USP: 15179538,
				SSP: 15271838,
				RAM: [][2]uint32{{5140624, 1}, {5140625, 239}, {5140626, 223}, {5140627, 107}, {5140628, 214}, {5140629, 17}, {15263496, 138}, {15263497, 189}, {5140630, 217}, {5140631, 146}},
			},
			want: 			cpuState{
				D:   [8]uint32{4254957524, 479950994, 746463964, 746026841, 30675182, 379055595, 2731896287, 3680621813},
				A:   [7]uint32{2377075333, 570434985, 2522680407, 1806635448, 1311629403, 3494014000, 1438732441},
				PC:  5140632,
				SR:  8465,
				USP: 15179538,
				SSP: 15271838,
				RAM: [][2]uint32{{5140624, 1}, {5140625, 239}, {5140626, 223}, {5140627, 107}, {5140628, 214}, {5140629, 17}, {15263496, 138}, {15263497, 189}, {5140630, 217}, {5140631, 146}},
				Cycles: 16,
			},
		},
		{
			name: "270 BSET #, (A4)+ 08dc",
			init: 			cpuState{
				D:   [8]uint32{2054816461, 1779649774, 189692316, 3126255639, 247858105, 2069109378, 2063115853, 3082258156},
				A:   [7]uint32{3452254573, 76154016, 1966397322, 2826234221, 1855585029, 365848146, 2303240213},
				PC:  8029532,
				SR:  1545,
				USP: 9550896,
				SSP: 4238376,
				RAM: [][2]uint32{{8029528, 8}, {8029529, 220}, {8029530, 143}, {8029531, 183}, {8029532, 144}, {8029533, 66}, {10091268, 27}, {10091269, 151}, {8029534, 188}, {8029535, 143}},
			},
			want: 			cpuState{
				D:   [8]uint32{2054816461, 1779649774, 189692316, 3126255639, 247858105, 2069109378, 2063115853, 3082258156},
				A:   [7]uint32{3452254573, 76154016, 1966397322, 2826234221, 1855585030, 365848146, 2303240213},
				PC:  8029536,
				SR:  1545,
				USP: 9550896,
				SSP: 4238376,
				RAM: [][2]uint32{{8029528, 8}, {8029529, 220}, {8029530, 143}, {8029531, 183}, {8029532, 144}, {8029533, 66}, {10091268, 27}, {10091269, 151}, {8029534, 188}, {8029535, 143}},
				Cycles: 16,
			},
		},
		{
			name: "549 BSET D2, (A1) 05d1",
			init: 			cpuState{
				D:   [8]uint32{1395983358, 3147743322, 560970179, 2062944658, 2288708470, 3013533993, 195751536, 3681557408},
				A:   [7]uint32{603368476, 2253080064, 2976345894, 4259274509, 148308144, 3619235276, 3971920947},
				PC:  6111862,
				SR:  30,
				USP: 2886492,
				SSP: 7865420,
				RAM: [][2]uint32{{6111858, 5}, {6111859, 209}, {6111860, 234}, {6111861, 87}, {4933120, 178}, {4933121, 224}, {6111862, 28}, {6111863, 135}},
			},
			want: 			cpuState{
				D:   [8]uint32{1395983358, 3147743322, 560970179, 2062944658, 2288708470, 3013533993, 195751536, 3681557408},
				A:   [7]uint32{603368476, 2253080064, 2976345894, 4259274509, 148308144, 3619235276, 3971920947},
				PC:  6111864,
				SR:  30,
				USP: 2886492,
				SSP: 7865420,
				RAM: [][2]uint32{{6111858, 5}, {6111859, 209}, {6111860, 234}, {6111861, 87}, {4933120, 186}, {4933121, 224}, {6111862, 28}, {6111863, 135}},
				Cycles: 12,
			},
		},
		{
			name: "822 BSET D1, (d8, A2, Xn) 03f2",
			init: 			cpuState{
				D:   [8]uint32{1360671548, 2526310425, 204500513, 3605336269, 3218459604, 1515495112, 3688910019, 3715704421},
				A:   [7]uint32{3164141351, 512334295, 86940884, 3386786055, 99908836, 3232932371, 1251024991},
				PC:  13207486,
				SR:  1800,
				USP: 13611872,
				SSP: 3647282,
				RAM: [][2]uint32{{13207482, 3}, {13207483, 242}, {13207484, 124}, {13207485, 179}, {13207486, 13}, {13207487, 189}, {10994412, 142}, {10994413, 164}, {13207488, 161}, {13207489, 216}},
			},
			want: 			cpuState{
				D:   [8]uint32{1360671548, 2526310425, 204500513, 3605336269, 3218459604, 1515495112, 3688910019, 3715704421},
				A:   [7]uint32{3164141351, 512334295, 86940884, 3386786055, 99908836, 3232932371, 1251024991},
				PC:  13207490,
				SR:  1800,
				USP: 13611872,
				SSP: 3647282,
				RAM: [][2]uint32{{13207482, 3}, {13207483, 242}, {13207484, 124}, {13207485, 179}, {13207486, 13}, {13207487, 189}, {10994412, 142}, {10994413, 164}, {13207488, 161}, {13207489, 216}},
				Cycles: 18,
			},
		},
		{
			name: "1076 BSET D3, (A4) 07d4",
			init: 			cpuState{
				D:   [8]uint32{2906939240, 1541927504, 3197151512, 2234808709, 2356855677, 1588852331, 3268650617, 2609395316},
				A:   [7]uint32{3187601820, 787906876, 788184189, 4081670351, 3032658307, 2149897011, 778104333},
				PC:  11799404,
				SR:  8960,
				USP: 16508504,
				SSP: 14897880,
				RAM: [][2]uint32{{11799400, 7}, {11799401, 212}, {11799402, 136}, {11799403, 202}, {12759426, 10}, {12759427, 19}, {11799404, 217}, {11799405, 41}},
			},
			want: 			cpuState{
				D:   [8]uint32{2906939240, 1541927504, 3197151512, 2234808709, 2356855677, 1588852331, 3268650617, 2609395316},
				A:   [7]uint32{3187601820, 787906876, 788184189, 4081670351, 3032658307, 2149897011, 778104333},
				PC:  11799406,
				SR:  8964,
				USP: 16508504,
				SSP: 14897880,
				RAM: [][2]uint32{{11799400, 7}, {11799401, 212}, {11799402, 136}, {11799403, 202}, {12759426, 10}, {12759427, 51}, {11799404, 217}, {11799405, 41}},
				Cycles: 12,
			},
		},
		{
			name: "1341 BSET D7, D2 0fc2",
			init: 			cpuState{
				D:   [8]uint32{3886570056, 450237450, 2821386277, 526485642, 1878955913, 2290383843, 2218621345, 3872243210},
				A:   [7]uint32{2151451825, 2404941193, 1523312776, 925886732, 212666779, 3478548227, 996648529},
				PC:  6046052,
				SR:  276,
				USP: 4644548,
				SSP: 6523504,
				RAM: [][2]uint32{{6046048, 15}, {6046049, 194}, {6046050, 247}, {6046051, 248}, {6046052, 26}, {6046053, 26}},
			},
			want: 			cpuState{
				D:   [8]uint32{3886570056, 450237450, 2821387301, 526485642, 1878955913, 2290383843, 2218621345, 3872243210},
				A:   [7]uint32{2151451825, 2404941193, 1523312776, 925886732, 212666779, 3478548227, 996648529},
				PC:  6046054,
				SR:  276,
				USP: 4644548,
				SSP: 6523504,
				RAM: [][2]uint32{{6046048, 15}, {6046049, 194}, {6046050, 247}, {6046051, 248}, {6046052, 26}, {6046053, 26}},
				Cycles: 6,
			},
		},
		{
			name: "1661 BSET D0, (A1) 01d1",
			init: 			cpuState{
				D:   [8]uint32{1464162528, 3540821568, 2501879744, 1989583267, 2540980545, 885271029, 577882092, 3379154235},
				A:   [7]uint32{3181636577, 2167929463, 4115284442, 1066516671, 1875136482, 4133661928, 3969224971},
				PC:  15476476,
				SR:  8970,
				USP: 12939064,
				SSP: 5964522,
				RAM: [][2]uint32{{15476472, 1}, {15476473, 209}, {15476474, 242}, {15476475, 162}, {3668598, 196}, {3668599, 243}, {15476476, 170}, {15476477, 158}},
			},
			want: 			cpuState{
				D:   [8]uint32{1464162528, 3540821568, 2501879744, 1989583267, 2540980545, 885271029, 577882092, 3379154235},
				A:   [7]uint32{3181636577, 2167929463, 4115284442, 1066516671, 1875136482, 4133661928, 3969224971},
				PC:  15476478,
				SR:  8970,
				USP: 12939064,
				SSP: 5964522,
				RAM: [][2]uint32{{15476472, 1}, {15476473, 209}, {15476474, 242}, {15476475, 162}, {3668598, 196}, {3668599, 243}, {15476476, 170}, {15476477, 158}},
				Cycles: 12,
			},
		},
		{
			name: "1914 BSET #, (d8, A3, Xn) 08f3",
			init: 			cpuState{
				D:   [8]uint32{2956688683, 715890059, 2055195311, 634397833, 119260600, 1692055100, 2639762238, 2948421285},
				A:   [7]uint32{2758915213, 2148993355, 635801234, 3132470836, 3776533067, 571297606, 1518797190},
				PC:  13155754,
				SR:  9502,
				USP: 12958278,
				SSP: 1280102,
				RAM: [][2]uint32{{13155750, 8}, {13155751, 243}, {13155752, 120}, {13155753, 227}, {13155754, 61}, {13155755, 196}, {13155756, 163}, {13155757, 138}, {8772224, 39}, {8772225, 58}, {13155758, 47}, {13155759, 99}},
			},
			want: 			cpuState{
				D:   [8]uint32{2956688683, 715890059, 2055195311, 634397833, 119260600, 1692055100, 2639762238, 2948421285},
				A:   [7]uint32{2758915213, 2148993355, 635801234, 3132470836, 3776533067, 571297606, 1518797190},
				PC:  13155760,
				SR:  9498,
				USP: 12958278,
				SSP: 1280102,
				RAM: [][2]uint32{{13155750, 8}, {13155751, 243}, {13155752, 120}, {13155753, 227}, {13155754, 61}, {13155755, 196}, {13155756, 163}, {13155757, 138}, {8772224, 39}, {8772225, 58}, {13155758, 47}, {13155759, 99}},
				Cycles: 22,
			},
		},
		{
			name: "2203 BSET D4, (A2) 09d2",
			init: 			cpuState{
				D:   [8]uint32{2423342590, 1717518941, 1894113190, 1599704095, 1060402170, 3074986202, 2097878722, 2872463462},
				A:   [7]uint32{3772890188, 870034990, 2847361311, 3834927431, 3059108167, 581200905, 1681948997},
				PC:  15812350,
				SR:  540,
				USP: 13000712,
				SSP: 1716236,
				RAM: [][2]uint32{{15812346, 9}, {15812347, 210}, {15812348, 222}, {15812349, 152}, {12011806, 17}, {12011807, 106}, {15812350, 165}, {15812351, 194}},
			},
			want: 			cpuState{
				D:   [8]uint32{2423342590, 1717518941, 1894113190, 1599704095, 1060402170, 3074986202, 2097878722, 2872463462},
				A:   [7]uint32{3772890188, 870034990, 2847361311, 3834927431, 3059108167, 581200905, 1681948997},
				PC:  15812352,
				SR:  540,
				USP: 13000712,
				SSP: 1716236,
				RAM: [][2]uint32{{15812346, 9}, {15812347, 210}, {15812348, 222}, {15812349, 152}, {12011806, 17}, {12011807, 110}, {15812350, 165}, {15812351, 194}},
				Cycles: 12,
			},
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			runTest(t, tt.init, tt.want)
		})
	}
}
